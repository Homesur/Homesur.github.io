<?php
$pdo = new PDO("mysql:host=db4free.net;dbname=homesurmysql;charset=utf8", "homesurmysql", "igori008");

// Добавление товара
if (isset($_POST['add'])) {
    $name = $_POST['name'];
    $price = $_POST['price'];
    $stmt = $pdo->prepare("INSERT INTO products (name, price) VALUES (?, ?)");
    $stmt->execute([$name, $price]);
}

// Удаление товара
if (isset($_POST['delete'])) {
    $id = $_POST['delete_id'];
    $stmt = $pdo->prepare("DELETE FROM products WHERE id = ?");
    $stmt->execute([$id]);
}

// Получение всех товаров
$products = $pdo->query("SELECT * FROM products")->fetchAll(PDO::FETCH_ASSOC);
?>

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Управление товарами</title>
</head>
<body>
    <h2>Добавить товар</h2>
    <form method="post">
        Название: <input type="text" name="name" required>
        Цена: <input type="number" step="0.01" name="price" required>
        <button type="submit" name="add">Добавить</button>
    </form>

    <h2>Удалить товар по ID</h2>
    <form method="post">
        ID: <input type="number" name="delete_id" required>
        <button type="submit" name="delete">Удалить</button>
    </form>

    <h2>Список товаров</h2>
    <table border="1">
        <tr><th>ID</th><th>Название</th><th>Цена</th></tr>
        <?php foreach ($products as $product): ?>
            <tr>
                <td><?= htmlspecialchars($product['id']) ?></td>
                <td><?= htmlspecialchars($product['name']) ?></td>
                <td><?= htmlspecialchars($product['price']) ?> руб.</td>
            </tr>
        <?php endforeach; ?>
    </table>
</body>
</html>


